{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>Warning</p> <p>This documentation is still a work in progress. If you have any questions, feel free to contact us.</p>"},{"location":"#integrations-designed-for-practical-use","title":"Integrations designed for practical use","text":"<p> Redon Tech's Integration created to work alongside payhip is an older concept but re-imaginged to function better than existing competitors &amp; all with the benifits of being open source. </p> <p> Our Integration requires only a small bit of setup, some of which is fairly simple to do, and the rest will contain a detailed setup guide on how to get started! </p> Download Now Guide to get started"},{"location":"#advantages-of-our-integrations-bot","title":"Advantages of our Integrations Bot","text":""},{"location":"#highly-customisable","title":"Highly Customisable","text":"<p>Our Integration soultion is easily one of the most customisable options currently out there when it comes to being able to integrate payhip sales into discord. This is because this bot was built with customisation in mind, and as part of that, various things can be customised within the config.json file or using the config command. Some of our customisation includes the ability to change embed colours, Bot status, what events you want sent through, and more!</p>"},{"location":"#faster-than-other-avaliable-options","title":"Faster than other avaliable options","text":"<p>Unlike some of the other options out there that can take 10-15 minutes to push through the sales, our solution normally pushes though sales within 90 seconds of the purchase happening. This helps us deliver a more on point service. DISCLAIMER: API Latency, Bot Ping &amp; Payhip can cause these times to vary</p>"},{"location":"#less-downtime-full-support","title":"Less downtime, Full Support","text":"<p>With the way this bot is coded, it's setup to run into as few errors/crashes as possible to help prevent any downtime that may otherwise occur. And if you do run into any downtime/issues while using Integrations, we have a small team of support staff who can assist you with most issues that may occur. DISCLAIMER: Any self-made customisation to the code may increase downtime of the service or void support. </p>"},{"location":"#interested-in-integrations-bot","title":"Interested in Integrations Bot?","text":"<p>If you are interested in using our Integrations bot, you can either download the release from github, follow our setup documentation &amp; host your own bot, alternativly, in the future you can use our hosted version (NOT AVALIABLE YET)</p> <p>Welcome to the Redon Tech community!</p> <p>Download Now Get Started</p>"},{"location":"credits/","title":"Credits","text":""},{"location":"credits/#you","title":"You","text":"<p>You guys are the reason this project came to life, without the support of the redon tech community I would have never made V2 of the silly little bot I first made for a friend's server. But now with the support of you, I've been able to develop this project into something bigger, something that will hopefully be used in many servers down the line!</p> <p>And now, for those who have put their time into this project:</p>"},{"location":"credits/#maintainers","title":"Maintainers","text":"Name Brief Links Miata The creator, developer &amp; project maintainer for Integrations GitHub Parker Co-Maintainer, mainly in hosting (coming in future) GitHub"},{"location":"credits/#frameworks-and-vendors","title":"Frameworks and Vendors","text":"<ul> <li>Express.JS - Server Framework used to handle API calls.</li> </ul>"},{"location":"credits/#testers","title":"Testers","text":"<p>Alpha Testers:</p> <ul> <li>Holt_Official</li> <li>And more to come ig?</li> </ul>"},{"location":"credits/#special-thanks","title":"Special Thanks","text":"<ul> <li>Holt_Official - Idea (Asking me to create them an older version)</li> </ul>"},{"location":"commands/config/","title":"<code>/config</code> Command","text":"<p>The <code>/config</code> command allows server administrators to update the bot's configuration directly from Discord. This command is essential for changing bot settings without editing files manually or restarting the bot externally.</p>"},{"location":"commands/config/#usage","title":"Usage","text":"<pre><code>/config set section:&lt;section&gt; key:&lt;key&gt; value:&lt;value&gt;\n</code></pre>"},{"location":"commands/config/#subcommands","title":"Subcommands","text":"<ul> <li>set: Update a specific configuration value.</li> </ul>"},{"location":"commands/config/#options","title":"Options","text":"<ul> <li>section (string, required): The configuration section to update. Autocompletes available sections from the config file.</li> <li>key (string, required): The key within the section to update.</li> <li>value (string, required): The new value to set. Accepts strings, numbers, booleans, or JSON objects.</li> </ul>"},{"location":"commands/config/#permissions","title":"Permissions","text":"<p>Only users with the Administrator permission can use this command. If a non-admin attempts to use it, the bot will deny the request.</p>"},{"location":"commands/config/#behavior","title":"Behavior","text":"<ul> <li>The command reads the current configuration from <code>config/config.json</code>.</li> <li>It checks if the specified section and key exist. If not, it replies with an error.</li> <li>The value is parsed as JSON if possible (so you can set numbers, booleans, or objects, not just strings).</li> <li>The configuration file is updated on disk.</li> <li>If you update <code>discordConfig.botActivity</code>, the bot's presence/activity is updated live.</li> <li>Replies with a confirmation message on success.</li> </ul>"},{"location":"commands/config/#example","title":"Example","text":"<pre><code>/config set section:discordConfig key:botActivity value:\"Playing with integrations!\"\n</code></pre>"},{"location":"commands/config/#notes","title":"Notes","text":"<ul> <li>Use with caution: incorrect changes may affect bot behavior.</li> <li>Some changes may require a bot restart to take full effect (except for bot activity, which updates instantly).</li> </ul> <p>For more details, see the configuration file in <code>src/config/config.json</code> or contact the maintainers.</p>"},{"location":"commands/sales/","title":"<code>/sales</code> Command","text":"<p>The <code>/sales</code> command allows server administrators to view recent sales, refunds, and subscription events tracked by the bot. Results are displayed in a paginated embed with navigation buttons for easy browsing.</p>"},{"location":"commands/sales/#usage","title":"Usage","text":"<pre><code>/sales [count:&lt;number&gt;] [filter:&lt;period&gt;]\n</code></pre>"},{"location":"commands/sales/#options","title":"Options","text":"<ul> <li>count (integer, optional): Number of sales to show (10-100). Defaults to 10 if not specified.</li> <li>filter (string, optional): Filter sales by time period. Choices:<ul> <li><code>all</code> (default): All time</li> <li><code>today</code>: Only today's sales</li> <li><code>week</code>: Only this week's sales</li> </ul> </li> </ul>"},{"location":"commands/sales/#permissions","title":"Permissions","text":"<p>Only users with the Administrator permission can use this command. Non-admins will receive an error message.</p>"},{"location":"commands/sales/#behavior","title":"Behavior","text":"<ul> <li>Fetches recent sales, refunds, and subscription events from the database using the selected filter and count.</li> <li>Results are shown in a paginated embed (10 per page) with navigation buttons (First, Previous, Next, Last).</li> <li>Each entry includes product, customer, date, and amount. Refunds and subscriptions are clearly labeled.</li> <li>If no results are found for the selected filter, a message is shown.</li> <li>Only the user who invoked the command can use the navigation buttons.</li> <li>Buttons are disabled after 5 minutes of inactivity.</li> </ul>"},{"location":"commands/sales/#example","title":"Example","text":"<pre><code>/sales count:20 filter:today\n</code></pre>"},{"location":"commands/sales/#notes","title":"Notes","text":"<ul> <li>The total number of tracked transactions is shown in the embed footer.</li> <li>Data is pulled from the bot's internal sales database.</li> <li>For more details on sales tracking, see the bot's documentation or contact the maintainers.</li> </ul>"},{"location":"commands/stats/","title":"<code>/stats</code> Command","text":"<p>The <code>/stats</code> command allows server administrators to view sales statistics, including sales, refunds, revenue, and subscriptions, for different time periods. Results are shown in a detailed embed with top products and summary metrics.</p>"},{"location":"commands/stats/#usage","title":"Usage","text":"<pre><code>/stats [period:&lt;period&gt;]\n</code></pre>"},{"location":"commands/stats/#options","title":"Options","text":"<ul> <li>period (string, optional): Time period for statistics. Choices:<ul> <li><code>all</code> (default): All time</li> <li><code>today</code>: Today only</li> <li><code>week</code>: This week</li> <li><code>month</code>: This month</li> </ul> </li> </ul>"},{"location":"commands/stats/#permissions","title":"Permissions","text":"<p>Only users with the Administrator permission can use this command. Non-admins will receive an error message.</p>"},{"location":"commands/stats/#behavior","title":"Behavior","text":"<ul> <li>Fetches statistics for the selected period, including:<ul> <li>Total sales, refunds, and net revenue</li> <li>Average order value and refund rate</li> <li>Number of subscriptions</li> <li>Top 5 products by sales</li> </ul> </li> <li>Results are shown in a single embed with a summary and top products list.</li> <li>The total number of tracked transactions is shown in the embed footer.</li> </ul>"},{"location":"commands/stats/#example","title":"Example","text":"<pre><code>/stats period:week\n</code></pre>"},{"location":"commands/stats/#notes","title":"Notes","text":"<ul> <li>Data is pulled from the bot's internal sales database.</li> <li>For more details on statistics, see the bot's documentation or contact the maintainers.</li> </ul>"},{"location":"commands/test/","title":"<code>/test</code> Command","text":"<p>The <code>/test</code> command allows server administrators to send test webhook notifications to the bot's webhook endpoint. This is useful for verifying webhook handling and integration without making real purchases or subscription changes.</p>"},{"location":"commands/test/#usage","title":"Usage","text":"<pre><code>/test type:&lt;event_type&gt;\n</code></pre>"},{"location":"commands/test/#options","title":"Options","text":"<ul> <li>type (string, required): The type of webhook event to test. Choices:<ul> <li><code>paid</code>: Simulate a paid sale event</li> <li><code>subscription_created</code>: Simulate a subscription creation event</li> <li><code>subscription_deleted</code>: Simulate a subscription cancellation event</li> <li><code>refunded</code>: Simulate a refund event</li> </ul> </li> </ul>"},{"location":"commands/test/#permissions","title":"Permissions","text":"<p>Only users with the Administrator permission can use this command. Non-admins will receive an error message.</p>"},{"location":"commands/test/#behavior","title":"Behavior","text":"<ul> <li>Sends a test webhook payload to the configured local webhook endpoint (as set in <code>config.json</code>).</li> <li>Replies with the result of the webhook request (success or error message).</li> <li>No real data is affected; all payloads are mock/test data.</li> </ul>"},{"location":"commands/test/#example","title":"Example","text":"<pre><code>/test type:paid\n</code></pre>"},{"location":"commands/test/#notes","title":"Notes","text":"<ul> <li>Ensure the bot's webhook server is running and accessible at the configured endpoint.</li> <li>For more details on webhook testing, see the bot's documentation or contact the maintainers.</li> </ul>"},{"location":"database/config/","title":"Database Configuration","text":"<p>The bot uses a SQL-based database to store sales, refunds, and subscription data. Most users will not need to modify the database configuration, but advanced users can adjust some options in the <code>config.json</code> file.</p>"},{"location":"database/config/#configuration-file","title":"Configuration File","text":"<p>Database-related options are found in the <code>databaseConfig</code> section of your <code>config.json</code>:</p> <pre><code>{\n  \"databaseConfig\": {\n    \"maxSales\": 200\n  }\n}\n</code></pre>"},{"location":"database/config/#options","title":"Options","text":"Option Type Default Description maxSales number 200 Maximum number of sales records to keep in cache <p>Note: Increasing <code>maxSales</code> may use more storage, but allows for more sales history in commands like <code>/sales</code>.</p>"},{"location":"database/config/#editing-queries-or-schema","title":"Editing Queries or Schema","text":"<p>If you wish to modify the database schema or queries, do so with caution. Custom changes to SQL files in <code>src/data/queries/</code> or <code>src/data/schema/</code> are not supported unless they are required by an official update from Redon Tech.</p> <p>We only provide support for issues caused by official updates.</p>"},{"location":"database/config/#best-practices","title":"Best Practices","text":"<ul> <li>Only edit <code>databaseConfig</code> in <code>config.json</code> for supported options.</li> <li>Back up your database before making any manual changes.</li> <li>Use the <code>/config</code> and <code>/configoptions</code> commands in Discord to view and update configuration live.</li> </ul> <p>For more details on the database schema, see schema.md. For available queries, see queries.md.</p>"},{"location":"database/queries/","title":"Database Queries","text":"<p>This bot uses external SQL files to manage all database operations. Below is a list of each query file, its purpose, and a brief description of its usage.</p> Query File Purpose getAllStats.sql Fetches all statistics from the stats table. getPeriodSales.sql Gets sales count and revenue for a given period. getPeriodRefunds.sql Gets refund count and total refunded amount for a period. getPeriodSubscriptions.sql Gets subscription count for a given period. getProductsForTopList.sql Retrieves product names from sales for top lists. insertSale.sql Inserts or updates a sale record. insertRefund.sql Inserts or updates a refund record. insertSubscription.sql Inserts or updates a subscription record. updateStatsSale.sql Updates stats after a sale. updateStatsRefund.sql Updates stats after a refund. updateStatsSubscription.sql Updates stats after a subscription. cleanupOldRecords.sql Deletes oldest records to maintain max record limits."},{"location":"database/queries/#query-details","title":"Query Details","text":""},{"location":"database/queries/#getallstatssql","title":"getAllStats.sql","text":"<p>Fetches all statistics from the <code>stats</code> table. <pre><code>SELECT * FROM stats WHERE id = 1;\n</code></pre></p>"},{"location":"database/queries/#getperiodsalessql","title":"getPeriodSales.sql","text":"<p>Gets sales count and revenue for a given period. <pre><code>SELECT COUNT(*) as count, SUM(amount) as revenue\nFROM sales\nWHERE type = 'sale' AND date &gt;= @startDate;\n</code></pre></p>"},{"location":"database/queries/#getperiodrefundssql","title":"getPeriodRefunds.sql","text":"<p>Gets refund count and total refunded amount for a period. <pre><code>SELECT COUNT(*) as count, SUM(amount) as refunded\nFROM sales\nWHERE type = 'refund' AND date &gt;= @startDate;\n</code></pre></p>"},{"location":"database/queries/#getperiodsubscriptionssql","title":"getPeriodSubscriptions.sql","text":"<p>Gets subscription count for a given period. <pre><code>SELECT COUNT(*) as count\nFROM subscriptions\nWHERE type = 'subscription_created' AND date &gt;= @startDate;\n</code></pre></p>"},{"location":"database/queries/#getproductsfortoplistsql","title":"getProductsForTopList.sql","text":"<p>Retrieves product names from sales for top lists. <pre><code>SELECT products \nFROM sales \nWHERE type = 'sale' AND products IS NOT NULL;\n</code></pre></p>"},{"location":"database/queries/#insertsalesql","title":"insertSale.sql","text":"<p>Inserts or updates a sale record. <pre><code>INSERT OR REPLACE INTO sales (id, type, products, amount, currency, customer, date, coupon, discount)\nVALUES (@id, @type, @products, @amount, @currency, @customer, @date, @coupon, @discount);\n</code></pre></p>"},{"location":"database/queries/#insertrefundsql","title":"insertRefund.sql","text":"<p>Inserts or updates a refund record. <pre><code>INSERT OR REPLACE INTO sales (id, type, products, amount, currency, customer, date, originalDate)\nVALUES (@id, @type, @products, @amount, @currency, @customer, @date, @originalDate);\n</code></pre></p>"},{"location":"database/queries/#insertsubscriptionsql","title":"insertSubscription.sql","text":"<p>Inserts or updates a subscription record. <pre><code>INSERT OR REPLACE INTO subscriptions (id, type, product, plan, customer, date)\nVALUES (@id, @type, @product, @plan, @customer, @date);\n</code></pre></p>"},{"location":"database/queries/#updatestatssalesql","title":"updateStatsSale.sql","text":"<p>Updates stats after a sale. <pre><code>UPDATE stats \nSET totalSales = totalSales + 1,\n    totalRevenue = totalRevenue + @amount\nWHERE id = 1;\n</code></pre></p>"},{"location":"database/queries/#updatestatsrefundsql","title":"updateStatsRefund.sql","text":"<p>Updates stats after a refund. <pre><code>UPDATE stats \nSET totalRefunds = totalRefunds + 1,\n    refundedAmount = refundedAmount + @amount\nWHERE id = 1;\n</code></pre></p>"},{"location":"database/queries/#updatestatssubscriptionsql","title":"updateStatsSubscription.sql","text":"<p>Updates stats after a subscription. <pre><code>UPDATE stats \nSET subscriptions = subscriptions + 1\nWHERE id = 1;\n</code></pre></p>"},{"location":"database/queries/#cleanupoldrecordssql","title":"cleanupOldRecords.sql","text":"<p>Deletes oldest records to maintain max record limits. <pre><code>DELETE FROM {table} \nWHERE id IN (\n    SELECT id FROM {table} \n    ORDER BY date ASC \n    LIMIT @toDelete\n);\n</code></pre></p> <p>Note: These queries are used internally by the bot. Editing them is not recommended unless you know what you are doing. For schema details, see schema.md.</p>"},{"location":"database/schema/","title":"Database Schema","text":"<p>This bot uses a simple SQLite database to store sales, refunds, subscriptions, and statistics. Below is a description of each table and its columns.</p>"},{"location":"database/schema/#tables","title":"Tables","text":""},{"location":"database/schema/#stats","title":"stats","text":"<p>Tracks overall statistics for sales, refunds, revenue, and subscriptions.</p> Column Type Description id INTEGER Always 1 (single row for stats) totalSales INTEGER Total number of sales totalRevenue REAL Total revenue from sales totalRefunds INTEGER Total number of refunds refundedAmount REAL Total amount refunded subscriptions INTEGER Total number of subscriptions <pre><code>CREATE TABLE IF NOT EXISTS stats (\n    id INTEGER PRIMARY KEY CHECK (id = 1),\n    totalSales INTEGER DEFAULT 0,\n    totalRevenue REAL DEFAULT 0,\n    totalRefunds INTEGER DEFAULT 0,\n    refundedAmount REAL DEFAULT 0,\n    subscriptions INTEGER DEFAULT 0\n);\n</code></pre>"},{"location":"database/schema/#sales","title":"sales","text":"<p>Stores all sales and refund records.</p> Column Type Description id TEXT Unique sale or refund ID type TEXT 'sale' or 'refund' products TEXT Product names (comma-separated) amount REAL Sale or refund amount currency TEXT Currency code (default 'USD') customer TEXT Customer name or ID date TEXT ISO date string coupon TEXT Coupon code used (if any) discount REAL Discount amount (if any) originalDate TEXT Original sale date (for refunds) <pre><code>CREATE TABLE IF NOT EXISTS sales (\n    id TEXT PRIMARY KEY,\n    type TEXT NOT NULL,\n    products TEXT,\n    amount REAL NOT NULL,\n    currency TEXT DEFAULT 'USD',\n    customer TEXT,\n    date TEXT NOT NULL,\n    coupon TEXT,\n    discount REAL DEFAULT 0,\n    originalDate TEXT\n);\n</code></pre>"},{"location":"database/schema/#subscriptions","title":"subscriptions","text":"<p>Stores all subscription records.</p> Column Type Description id TEXT Unique subscription ID type TEXT Subscription event type product TEXT Product name plan TEXT Subscription plan name customer TEXT Customer name or ID date TEXT ISO date string <pre><code>CREATE TABLE IF NOT EXISTS subscriptions (\n    id TEXT PRIMARY KEY,\n    type TEXT NOT NULL,\n    product TEXT,\n    plan TEXT,\n    customer TEXT,\n    date TEXT NOT NULL\n);\n</code></pre>"},{"location":"database/schema/#indexes","title":"Indexes","text":"<p>Indexes are used to speed up queries on date and type columns.</p> <pre><code>CREATE INDEX IF NOT EXISTS idx_sales_date ON sales(date);\nCREATE INDEX IF NOT EXISTS idx_sales_type ON sales(type);\nCREATE INDEX IF NOT EXISTS idx_subscriptions_date ON subscriptions(date);\n</code></pre> <p>Note: Editing the schema is not recommended unless you know what you are doing. For query details, see queries.md.</p>"},{"location":"dev/architecture/","title":"Architecture Overview","text":"<p>This document provides a high-level overview of the Integrations Bot architecture, including its main components and data flow.</p>"},{"location":"dev/architecture/#main-components","title":"Main Components","text":"<ul> <li>Discord Bot Core: Handles command registration, event listening, and interaction with the Discord API.</li> <li>Commands: Modular command files in <code>src/bot/commands/</code> (e.g., <code>config.js</code>, <code>sales.js</code>, <code>stats.js</code>, <code>test.js</code>). Each command is a self-contained module.</li> <li>Events: Event handlers in <code>src/bot/events/</code> for Discord events like <code>clientReady</code>, <code>interactionCreate</code>, <code>error</code>, and <code>warn</code>.</li> <li>Modules: Utility and logic modules in <code>src/bot/modules/</code> (e.g., <code>salesTracker.js</code>, <code>botLogger.js</code>, <code>embedCreator.js</code>).</li> <li>Configuration: JSON config files in <code>src/config/</code> for bot settings and secrets.</li> <li>Database: SQLite database accessed via SQL scripts in <code>src/data/queries/</code> and <code>src/data/schema/</code> for sales, stats, and subscriptions.</li> <li>Docs: Markdown documentation in <code>docs/</code> for commands, setup, and development.</li> </ul>"},{"location":"dev/architecture/#data-flow","title":"Data Flow","text":"<ol> <li>User Interaction: Users interact with the bot via Discord slash commands.</li> <li>Command Handling: The bot parses the command and routes it to the appropriate handler in <code>src/bot/commands/</code>.</li> <li>Business Logic: Command handlers use modules (e.g., <code>salesTracker</code>) to process data, interact with the database, and generate responses.</li> <li>Database Access: SQL queries are executed for reading/writing sales, stats, and config data.</li> <li>Response: The bot sends embeds or messages back to Discord based on the command result.</li> </ol>"},{"location":"dev/architecture/#extensibility","title":"Extensibility","text":"<ul> <li>New commands can be added by creating a new file in <code>src/bot/commands/</code> and registering it.</li> <li>Utility modules can be reused across commands.</li> <li>Database schema can be extended with new SQL scripts.</li> </ul> <p>For more details, see the code in <code>src/</code> and the rest of the documentation.</p>"},{"location":"dev/code-style/","title":"Code Style Guide","text":"<p>This document outlines the coding conventions and best practices for the Integrations Bot project.</p>"},{"location":"dev/code-style/#general","title":"General","text":"<ul> <li>Use ES6+ JavaScript syntax.</li> <li>Prefer <code>const</code> and <code>let</code> over <code>var</code>.</li> <li>Use strict equality (<code>===</code> and <code>!==</code>).</li> <li>Write clear, descriptive variable and function names.</li> </ul>"},{"location":"dev/code-style/#formatting","title":"Formatting","text":"<ul> <li>Indent with 2 spaces.</li> <li>Use Unix-style line endings (LF).</li> <li>Keep lines under 100 characters when possible.</li> <li>Use single quotes for strings, except in JSON.</li> <li>Place a space after keywords (e.g., <code>if (x) {</code>).</li> </ul>"},{"location":"dev/code-style/#structure","title":"Structure","text":"<ul> <li>Group related functions and constants together.</li> <li>Export modules using <code>module.exports</code>.</li> <li>Each command or module should be in its own file.</li> </ul>"},{"location":"dev/code-style/#comments","title":"Comments","text":"<ul> <li>Use JSDoc-style comments for functions and modules when appropriate.</li> <li>Add inline comments for complex logic.</li> </ul>"},{"location":"dev/code-style/#git-prs","title":"Git &amp; PRs","text":"<ul> <li>Write clear commit messages.</li> <li>Use feature branches for new features or fixes.</li> <li>Run tests and lint before submitting a PR.</li> </ul> <p>For more details, see the existing codebase for examples.</p>"},{"location":"dev/contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to Integrations Bot! This guide will help you get started.</p>"},{"location":"dev/contributing/#getting-started","title":"Getting Started","text":"<ol> <li>Fork the repository and clone it locally.</li> <li>Install dependencies using <code>npm install</code>.</li> <li>Set up your config by copying <code>src/config/template.config.json</code> to <code>src/config/config.json</code> and editing as needed.</li> <li>Run the bot locally to test your changes.</li> </ol>"},{"location":"dev/contributing/#making-changes","title":"Making Changes","text":"<ul> <li>Create a new branch for your feature or bugfix.</li> <li>Follow the Code Style Guide.</li> <li>Add or update documentation as needed.</li> <li>Test your changes before committing.</li> </ul>"},{"location":"dev/contributing/#submitting-changes","title":"Submitting Changes","text":"<ol> <li>Push your branch to your fork.</li> <li>Open a pull request with a clear description of your changes.</li> <li>Address any review feedback.</li> </ol>"},{"location":"dev/contributing/#commit-message-guidelines","title":"Commit Message Guidelines","text":"<p>Please use Conventional Commits for your commit messages. This helps keep the project history readable and automates changelogs and releases.</p>"},{"location":"dev/contributing/#quick-examples","title":"Quick examples","text":"<ul> <li><code>feat: new feature</code></li> <li><code>fix(scope): bug in scope</code></li> <li><code>feat!: breaking change</code> / <code>feat(scope)!: rework API</code></li> <li><code>chore(deps): update dependencies</code></li> </ul>"},{"location":"dev/contributing/#commit-types","title":"Commit types","text":"<ul> <li><code>build</code>: Changes that affect the build system or external dependencies (example scopes: gulp, npm)</li> <li><code>ci</code>: Changes to CI configuration files and scripts (example scopes: Travis, GitHub Actions)</li> <li><code>chore</code>: Changes which don't change source code or tests (e.g. build process, tools, libraries)</li> <li><code>docs</code>: Documentation only changes</li> <li><code>feat</code>: A new feature</li> <li><code>fix</code>: A bug fix</li> <li><code>perf</code>: A code change that improves performance</li> <li><code>refactor</code>: Code change that neither fixes a bug nor adds a feature</li> <li><code>revert</code>: Revert something</li> <li><code>style</code>: Changes that do not affect the meaning of the code (whitespace, formatting, etc)</li> <li><code>test</code>: Adding missing tests or correcting existing tests</li> </ul>"},{"location":"dev/contributing/#reminders","title":"Reminders","text":"<ul> <li>Put a newline before the extended commit body</li> <li>More details at conventionalcommits.org</li> </ul>"},{"location":"dev/contributing/#best-practices","title":"Best Practices","text":"<ul> <li>Keep pull requests focused and concise.</li> <li>Write clear commit messages.</li> <li>Be respectful and collaborative in code reviews.</li> </ul> <p>For questions, open an issue or contact the maintainers.</p>"},{"location":"get-started/configuration/","title":"Configuration Guide","text":"<p>Welcome to the configuration guide for the Payhip Sales Integration Bot! This guide will walk you through every step required to set up and customize your bot for your Discord server and Payhip account. Each section below explains the available configuration options, their purpose, and how to adjust them for your needs.</p>"},{"location":"get-started/configuration/#overview","title":"Overview","text":"<p>The bot uses a single configuration file (<code>src/config/config.json</code>) to control all its behavior. You can edit this file directly or use the <code>/config</code> command in Discord (admin only) for live updates. For first-time setup, start with the provided <code>template.config.json</code> and adjust values as needed.</p>"},{"location":"get-started/configuration/#configuration-file-structure","title":"Configuration File Structure","text":"<p>Here is an example configuration file:</p> <pre><code>{\n  \"discordConfig\": {\n    \"botActivity\": \"Redon.Tech | Payhip Integration\",\n    \"salesChannelId\": \"YOUR_SALES_CHANNEL_ID\",\n    \"refundsChannelId\": \"YOUR_REFUNDS_CHANNEL_ID\",\n    \"subscriptionsChannelId\": \"YOUR_SUBSCRIPTIONS_CHANNEL_ID\"\n  },\n  \"payhipConfig\": {\n    \"eventTypes\": {\n      \"newSale\": true,\n      \"refund\": true,\n      \"subscriptions\": true\n    }\n  },\n  \"databaseConfig\": {\n    \"maxSales\": 200\n  },\n  \"webhookConfig\": {\n    \"webhookPort\": 3010,\n    \"webhookPath\": \"/webhook/payhip\",\n    \"webhookURL\": \"http://yourdomain.com/webhook/payhip\"\n  },\n  \"embedColors\": {\n    \"newSale\": \"#00FF00\",\n    \"refund\": \"#FF0000\",\n    \"subscription\": \"#0000FF\"\n  }\n}\n</code></pre>"},{"location":"get-started/configuration/#section-by-section-breakdown","title":"Section-by-Section Breakdown","text":""},{"location":"get-started/configuration/#1-discordconfig","title":"1. <code>discordConfig</code>","text":"<p>Controls how the bot interacts with Discord.</p> Key Description Example Value <code>botActivity</code> Status message shown under bot name <code>Redon.Tech | Payhip Integration</code> <code>salesChannelId</code> Channel ID for sales notifications <code>123456789012345678</code> <code>refundsChannelId</code> Channel ID for refund notifications <code>123456789012345678</code> <code>subscriptionsChannelId</code> Channel ID for subscription notifications <code>123456789012345678</code> <p></p> <p>How to find Channel IDs: 1. Enable Developer Mode in Discord (User Settings &gt; Advanced &gt; Developer Mode). 2. Right-click your target channel and select \"Copy Channel ID\".</p>"},{"location":"get-started/configuration/#2-payhipconfig","title":"2. <code>payhipConfig</code>","text":"<p>Controls which Payhip events the bot listens for.</p> Key Description Example Value <code>eventTypes</code> Object with event toggles <code>{ \"newSale\": true, \"refund\": true, \"subscriptions\": true }</code> <p>Set each event type to <code>true</code> to enable notifications, or <code>false</code> to disable.</p>"},{"location":"get-started/configuration/#3-databaseconfig","title":"3. <code>databaseConfig</code>","text":"<p>Controls database-related settings.</p> Key Description Example Value <code>maxSales</code> Maximum number of sales records to keep <code>200</code> <p>This limits the number of sales stored in the database. Older records are cleaned up automatically.</p>"},{"location":"get-started/configuration/#4-webhookconfig","title":"4. <code>webhookConfig</code>","text":"<p>Controls the webhook server that receives Payhip events.</p> Key Description Example Value <code>webhookPort</code> Port number for webhook server <code>3010</code> <code>webhookPath</code> Path for webhook endpoint <code>/webhook/payhip</code> <code>webhookURL</code> Public URL for Payhip to send webhooks <code>http://yourdomain.com/webhook/payhip</code> <p></p> <p>How to set up Payhip Webhooks: 1. Go to Payhip Dashboard &gt; Account &gt; Webhooks. 2. Add your bot's public webhook URL. 3. Select the events you want to send (Sale, Refund, Subscription).</p>"},{"location":"get-started/configuration/#5-embedcolors","title":"5. <code>embedColors</code>","text":"<p>Customize the color of Discord embeds for each event type.</p> Key Description Example Value <code>newSale</code> Color for new sale notifications <code>#00FF00</code> <code>refund</code> Color for refund notifications <code>#FF0000</code> <code>subscription</code> Color for subscription events <code>#0000FF</code> <p>Use any valid hex color code. This helps visually distinguish event types in Discord.</p> <p></p>"},{"location":"get-started/configuration/#editing-configuration","title":"Editing Configuration","text":"<p>You can edit the configuration file directly, or use the <code>/config</code> command in Discord for live updates (admin only).</p>"},{"location":"get-started/configuration/#editing-via-file","title":"Editing via File","text":"<ol> <li>Open <code>src/config/config.json</code> in your editor.</li> <li>Change values as needed.</li> <li>Save the file. The bot will reload config automatically if supported, or restart the bot.</li> </ol>"},{"location":"get-started/configuration/#editing-via-discord-command","title":"Editing via Discord Command","text":"<p>Use the <code>/config set section key value</code> command. For example:</p> <pre><code>/config set discordConfig botActivity \"Payhip Sales Bot\"\n/config set webhookConfig webhookPort 3010\n</code></pre> <p></p>"},{"location":"get-started/configuration/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Bot not updating config? Make sure you have permission and the bot is running the latest code.</li> <li>Webhook not working? Double-check your webhook URL and port, and ensure your server is accessible from the internet.</li> <li>No notifications? Check your channel IDs and event toggles.</li> </ul>"},{"location":"get-started/configuration/#advanced-tips","title":"Advanced Tips","text":"<ul> <li>Use environment variables for sensitive data if deploying in production.</li> <li>Keep a backup of your config file before making major changes.</li> <li>Review the code-style guide for best practices.</li> </ul> <p>Need help? Join our Discord support server.</p>"},{"location":"get-started/installation/","title":"Installation &amp; First Run Guide","text":"<p>Welcome! This guide will walk you through installing, configuring, and running the Integrations Bot for the first time.</p>"},{"location":"get-started/installation/#1-prerequisites","title":"1. Prerequisites","text":"<ul> <li>Node.js (v18 or newer) installed</li> <li>npm (comes with Node.js)</li> <li>(Optional) SQLite for database inspection</li> </ul>"},{"location":"get-started/installation/#2-download-extract-the-bot","title":"2. Download &amp; Extract the Bot","text":"<p>Clone the repository or download the latest release:</p> <p><pre><code>git clone https://github.com/yourusername/integrations-bot.git\ncd integrations-bot\n</code></pre> Or unzip the archive and open the folder in your code editor.</p>"},{"location":"get-started/installation/#3-choose-your-hosting-method","title":"3. Choose Your Hosting Method","text":"<p>You can run the bot on your own hardware (self-hosted) or a paid VPS/cloud server. See below for tips:</p> Feature Self-Hosted Paid VPS (Cloud Host) Cost Free (uses your hardware) Monthly fee (varies) Uptime Depends on your device 24/7, high reliability Public Accessibility Requires port forwarding Public IP by default Maintenance You manage everything Host manages hardware Best For Hobbyists, testing Production, always-on bots"},{"location":"get-started/installation/#4-install-dependencies","title":"4. Install Dependencies","text":"<pre><code>npm install\n</code></pre>"},{"location":"get-started/installation/#5-configuration","title":"5. Configuration","text":"<ol> <li>Copy the template config and env files:    <pre><code>cp src/config/template.config.json src/config/config.json\ncp src/config/.env.template src/config/.env\n</code></pre></li> <li>Open <code>src/config/config.json</code> and fill in:</li> <li>Channel IDs for sales, refunds, subscriptions (under <code>discordConfig</code>)</li> <li>Webhook config (under <code>webhookConfig</code>)</li> <li>Any other required fields (see comments in the template)</li> <li>Save the file.</li> <li>Open <code>src/config/.env</code> and fill in:</li> <li>BOT_TOKEN (from Discord Developer Portal)</li> <li>CLIENT_ID (from Discord Developer Portal)</li> <li>Save the file.</li> </ol>"},{"location":"get-started/installation/#6-domain-setup-recommended","title":"6. Domain Setup (Recommended)","text":"<p>To receive Payhip webhooks reliably, your bot must be accessible from the internet. This usually means setting up a public domain name and DNS.</p> <p>Free Domain: - Use DigitalPlat to register a free domain.</p> <p>DNS Hosting: - Use Cloudflare to manage your DNS for free, add SSL, and protect your site.</p> <p>Steps: 1. Register a free domain at DigitalPlat. 2. Add your domain to Cloudflare and update your nameservers as instructed. 3. Create an A record pointing to your server\u2019s public IP address. 4. (Optional) Enable SSL in Cloudflare for secure HTTPS access.</p>"},{"location":"get-started/installation/#7-database-setup","title":"7. Database Setup","text":"<ul> <li>The bot will create the SQLite database and tables automatically on first run.</li> <li>No manual setup is required unless you want to inspect or modify the schema (see <code>src/data/schema/</code>).</li> </ul>"},{"location":"get-started/installation/#8-running-the-bot","title":"8. Running the Bot","text":"<p><pre><code>node src/bot/Handler.js\n</code></pre> or, if you have a start script: <pre><code>npm start\n</code></pre> Or use a process manager like PM2 for production: <pre><code>npm install -g pm2\npm2 start src/bot/Handler.js --name payhip-bot\n</code></pre></p> <p>You should see a message indicating the bot is online.</p>"},{"location":"get-started/installation/#9-inviting-the-bot","title":"9. Inviting the Bot","text":"<ol> <li>Go to the Discord Developer Portal and select your application.</li> <li>Under \"OAuth2 &gt; URL Generator\", select <code>bot</code> and <code>applications.commands</code> scopes.</li> <li>Set permissions (at minimum: <code>Send Messages</code>, <code>Embed Links</code>, <code>Manage Webhooks</code>).</li> <li>Copy the generated URL and open it in your browser to invite the bot to your server.</li> </ol>"},{"location":"get-started/installation/#10-setting-up-payhip-webhooks","title":"10. Setting Up Payhip Webhooks","text":"<ol> <li>Go to Payhip Dashboard &gt; Account &gt; Settings &gt; Developer.</li> <li>Enter your public webhook URL (e.g., <code>https://yourdomain.com/webhook/payhip</code>).</li> <li>Select the events you want to receive.</li> </ol>"},{"location":"get-started/installation/#11-testing-the-setup","title":"11. Testing the Setup","text":"<ul> <li>Use <code>/ping</code> or <code>/test</code> in your Discord server to verify the bot is responding.</li> <li>Check the console for any errors or status messages.</li> </ul>"},{"location":"get-started/installation/#12-troubleshooting","title":"12. Troubleshooting","text":"<ul> <li>Bot not appearing online?</li> <li>Double-check your bot token in <code>.env</code> and config file.</li> <li>Make sure you have internet access and the correct Node.js version.</li> <li>Commands not working?</li> <li>Ensure the bot has the right permissions in your server.</li> <li>Try re-inviting the bot with the correct scopes.</li> <li>Webhooks not received?</li> <li>Make sure your domain is set up correctly and your server is accessible from the internet.</li> <li>Check firewall or port issues if self-hosting.</li> <li>Discord errors?</li> <li>Double-check your bot token and channel IDs in the config.</li> <li>For more help, see the documentation or open an issue on GitHub.</li> </ul> <p>Need help? Join our Discord support server.</p>"},{"location":"webhooks/integration/","title":"Webhook Integration","text":"<p>The Integrations Bot uses a webhook to connect your Payhip account to your Discord server. This allows you to receive real-time notifications for sales, refunds, and subscription events directly in your Discord channels.</p>"},{"location":"webhooks/integration/#how-it-works","title":"How It Works","text":"<ol> <li>Payhip Event: A customer makes a purchase, requests a refund, or starts/cancels a subscription on your Payhip store.</li> <li>Webhook Triggered: Payhip sends a POST request to your configured webhook URL (see Setup Guide).</li> <li>Bot Receives Event: The bot's Express server receives the event at the <code>/webhook/payhip</code> endpoint.</li> <li>Event Processing: The bot parses the event, updates the database, and posts a formatted embed in the appropriate Discord channel.</li> </ol>"},{"location":"webhooks/integration/#supported-events","title":"Supported Events","text":"<ul> <li>Sale Completed (<code>paid</code>)</li> <li>Refund Issued (<code>refunded</code>)</li> <li>Subscription Created (<code>subscription.created</code>)</li> <li>Subscription Canceled (<code>subscription.deleted</code>)</li> </ul> <p>Other event types may be ignored or logged for future use.</p>"},{"location":"webhooks/integration/#example-event-flow","title":"Example Event Flow","text":"<ol> <li>Customer buys a product on Payhip</li> <li>Payhip sends a <code>paid</code> event to your webhook URL</li> <li>The bot receives the event and posts a \"New Sale Completed\" embed in your sales channel</li> </ol>"},{"location":"webhooks/integration/#security-notes","title":"Security Notes","text":"<ul> <li>The bot ignores test payloads (signature starts with <code>test</code>)</li> <li>Only events from your configured webhook URL are processed</li> <li>Make sure your webhook URL is kept private if possible</li> </ul>"},{"location":"webhooks/integration/#customization","title":"Customization","text":"<p>You can customize which events are sent, the embed colors, and the Discord channels in your <code>config.json</code> file:</p> <pre><code>{\n    \"discordConfig\": {\n        \"salesChannelId\": \"...\",\n        \"refundsChannelId\": \"...\",\n        \"subscriptionsChannelId\": \"...\"\n    },\n    \"embedColors\": {\n        \"newSale\": \"#00FF00\",\n        \"refund\": \"#FF0000\",\n        \"subscription\": \"#0000FF\"\n    },\n    \"payhipConfig\": {\n        \"eventTypes\": {\n            \"newSale\": true,\n            \"refund\": true,\n            \"subscriptions\": true\n        }\n    }\n}\n</code></pre> <p>For setup instructions, see Webhook Setup. For command usage, see Commands.</p>"},{"location":"webhooks/setup/","title":"Webhook Setup","text":"<p>This guide will walk you through setting up the Payhip webhook integration for the Integrations Bot. Follow each step carefully to ensure your sales, refunds, and subscriptions are delivered to your Discord server in real time.</p>"},{"location":"webhooks/setup/#1-configure-your-bot","title":"1. Configure Your Bot","text":"<p>Before setting up the webhook, make sure your bot is configured and running. You should have already completed the steps in Getting Started &gt; Configuration.</p> <p>Key config section:</p> <pre><code>{\n    \"webhookConfig\": {\n        \"webhookPort\": 3000,\n        \"webhookPath\": \"/webhook/payhip\",\n        \"webhookURL\": \"http://yourdomain.com/webhook/payhip\"\n    }\n}\n</code></pre> <p>Note: The <code>webhookURL</code> should be accessible from the public internet if you want Payhip to reach your bot. If you are testing locally, use a tool like ngrok to expose your local server.</p>"},{"location":"webhooks/setup/#2-start-the-bot","title":"2. Start the Bot","text":"<p>Run the bot using:</p> <pre><code>npm start\n</code></pre> <p>or for development with auto-reload:</p> <pre><code>npm run dev\n</code></pre> <p>The bot will start an Express server and listen for incoming webhook events on the configured port and path.</p>"},{"location":"webhooks/setup/#3-expose-your-webhook-local-testing","title":"3. Expose Your Webhook (Local Testing)","text":"<p>If you are running the bot locally, you need to expose your webhook endpoint to the internet. The easiest way is to use ngrok:</p> <pre><code>ngrok http 3000\n</code></pre> <p>This will give you a public URL (e.g., <code>https://abc123.ngrok.io/webhook/payhip</code>). Use this as your webhook URL in Payhip.</p> <p></p>"},{"location":"webhooks/setup/#4-set-up-the-webhook-in-payhip","title":"4. Set Up the Webhook in Payhip","text":"<ol> <li>Log in to your Payhip dashboard.</li> <li>Go to Account &gt; Settings &gt; Webhooks.</li> <li>Click Add Webhook.</li> <li>Enter your webhook URL (from your config or ngrok) in the Webhook URL field.</li> <li>Select the events you want to receive (recommended: all sales, refunds, and subscriptions).</li> <li>Save the webhook.</li> </ol>"},{"location":"webhooks/setup/#5-test-the-webhook","title":"5. Test the Webhook","text":"<p>You can test your webhook setup using the <code>/test</code> command in Discord:</p> <pre><code>/test type:paid\n</code></pre> <p>Or by making a real purchase/refund on Payhip. The bot will log incoming events and post them to the configured Discord channels.</p>"},{"location":"webhooks/setup/#6-troubleshooting","title":"6. Troubleshooting","text":"<ul> <li>Make sure your bot is running and accessible from the internet.</li> <li>Check your config for correct <code>webhookPort</code>, <code>webhookPath</code>, and <code>webhookURL</code>.</li> <li>If using ngrok, ensure it is running and the URL matches what you set in Payhip.</li> <li>Check the bot logs for errors (see the <code>logs/</code> directory).</li> <li>Ensure your Discord channel IDs are set in the config and the bot has permission to post in those channels.</li> </ul> <p>For advanced configuration, see Configuration and Database.</p> <p>Need help? Join our Discord support server.</p>"}]}